<ad-title><$ courses pinned /></ad-title>

<style>@import url("/<#? applang ?#>/courses.css");</style>

<div class="header">
    <div class="buttons">
        <button class="back" id="Button_Back"><$ home title /></button>
    </div>
    <div class="title"><$ courses pinned /></div>
</div>

<div class="content">
    <div id="Grid_Courses" class="pins">
        <div class="course"></div>
        <div class="course"></div>
        <div class="course"></div>
        <div class="course"></div>
    </div>
</div>

<script>
    $.ajax({
        type: "get",
        url: "/courses/get",
        success: function(data)
        {
            Grid_Courses.innerHTML = "";
            Courses.Append(Courses.Pins.Get(), Grid_Courses);
            
            for (const item of [...Grid_Courses.children])
            {
                const course = data.find(o => o.id == item.data.id);
                if (course == null)
                {
                    item.remove();
                    continue;
                }
                
                item.data.name = course.name;
                item.find("name").innerText = course.name;
                item.find("description").innerText = course.description;
            }
            
            localStorage.setItem("courses_pins", JSON.stringify([...Grid_Courses.children].map(o => o.data)));
            Courses.Pins.AppendSidebar();
        }
    });

    Button_Back.onclick = function()
    {
        if (document.referrer)
        {
            const urlPrev = new URL(document.referrer);
            const urlNow = new URL(location.href);

            if (urlPrev.origin == urlNow.origin && urlPrev.pathname == "/home")
            {
                return window.history.back();
            }
        }

        window.location.href = "/home/";
    }
</script>